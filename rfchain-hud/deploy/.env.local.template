# ============================================================================
# RFChain HUD - Self-Hosted Configuration
# ============================================================================
# FORENSIC SIGNAL INTELLIGENCE SYSTEM - FULLY SELF-HOSTED
# 
# Copy this file to .env.local in the project root:
#   cp deploy/.env.local.template .env.local
#
# Then edit the values below for your environment.
# ============================================================================

# ----------------------------------------------------------------------------
# DATABASE (Required) - MySQL
# ----------------------------------------------------------------------------
# Run ./deploy/setup-mysql.sh to create database, then paste connection string
# Format: mysql://username:password@host:port/database
DATABASE_URL="mysql://rfchain:YOUR_PASSWORD_HERE@localhost:3306/rfchain_hud"

# ----------------------------------------------------------------------------
# SERVER
# ----------------------------------------------------------------------------
PORT=3007
NODE_ENV=production
HOST=0.0.0.0

# ----------------------------------------------------------------------------
# AUTHENTICATION (Local - No External Dependencies)
# ----------------------------------------------------------------------------
# JWT secret for session tokens - REQUIRED
# Generate with: openssl rand -base64 32
JWT_SECRET="GENERATE_A_SECURE_SECRET_HERE"

# First user to register will automatically become admin
# Additional users can only be created by admins

# ----------------------------------------------------------------------------
# PYTHON / ANALYSIS (Required for signal analysis)
# ----------------------------------------------------------------------------
# Path to Python interpreter with CuPy/CUDA support
# Use your conda environment: /home/YOUR_USER/miniconda3/envs/rfchain-hud/bin/python
PYTHON_PATH=/home/cvalentine/miniconda3/envs/rfchain-hud/bin/python

# Path to the forensic analysis script
ANALYSIS_SCRIPT_PATH=/home/cvalentine/RFChain/analyze_signal_v2.2.2_forensic.py

# Optional: Enhanced analysis module path
ENHANCED_MODULE_PATH=/home/cvalentine/RFChain/enhanced_analysis_module.py

# ----------------------------------------------------------------------------
# FILE STORAGE (Local - All files stay on your machine)
# ----------------------------------------------------------------------------
UPLOAD_DIR=./uploads
ANALYSIS_OUTPUT_DIR=./analysis_output
AUDIO_DIR=./audio_uploads

# ----------------------------------------------------------------------------
# GPU ACCELERATION (NVIDIA CUDA - RTX 4090)
# ----------------------------------------------------------------------------
GPU_ENABLED=true
CUDA_VISIBLE_DEVICES=0
CUPY_ACCELERATORS=cub,cutensor
GPU_MEMORY_FRACTION=0.8

# ----------------------------------------------------------------------------
# LLM / JARVIS AI (Choose ONE option)
# ----------------------------------------------------------------------------
# The JARVIS AI assistant requires an LLM backend.
# Choose one of the following options:

# Option 1: Local LLM via Ollama (FULLY OFFLINE - Recommended for forensic use)
# Install Ollama: curl -fsSL https://ollama.com/install.sh | sh
# Pull a model: ollama pull llama3
# OLLAMA_HOST=http://localhost:11434
# OLLAMA_MODEL=llama3

# Option 2: Anthropic Claude API (Cloud - requires internet)
# Get API key from: https://console.anthropic.com/
# ANTHROPIC_API_KEY=sk-ant-api03-...

# Option 3: OpenAI API (Cloud - requires internet)
# Get API key from: https://platform.openai.com/
# OPENAI_API_KEY=sk-...

# ----------------------------------------------------------------------------
# RAG CONFIGURATION (Retrieval-Augmented Generation)
# ----------------------------------------------------------------------------
# RAG enhances JARVIS responses with context from past analyses
# Note: RAG requires an LLM backend to generate embeddings
RAG_ENABLED=true
RAG_SIMILARITY_THRESHOLD=0.7
RAG_MAX_RESULTS=5

# ----------------------------------------------------------------------------
# LOGGING
# ----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FILE=./logs/rfchain-hud.log

# ----------------------------------------------------------------------------
# SECURITY
# ----------------------------------------------------------------------------
# Rate limiting (requests per minute per IP)
RATE_LIMIT_MAX=30
RATE_LIMIT_WINDOW_MS=60000

# Session duration (7 days in milliseconds)
SESSION_DURATION_MS=604800000

# ----------------------------------------------------------------------------
# OPTIONAL: External Services (Leave empty for fully self-hosted)
# ----------------------------------------------------------------------------
# These are NOT required for self-hosted operation.
# Only configure if you want to use Manus cloud services.

# Manus OAuth (leave empty for local-only auth)
# VITE_APP_ID=
# OAUTH_SERVER_URL=
# VITE_OAUTH_PORTAL_URL=

# Manus Storage (leave empty for local file storage)
# BUILT_IN_FORGE_API_URL=
# BUILT_IN_FORGE_API_KEY=
